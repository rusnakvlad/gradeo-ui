<p-card>

  <p-toolbar styleClass="p-mb-4">
    <ng-template pTemplate="left">
      <button pButton pRipple label="New" (click)="openNew()" icon="pi pi-plus" class="p-button-success p-mr-2" style="margin-right:10px"></button>
      <button pButton pRipple label="Delete" (click)="deleteSelected()" icon="pi pi-trash" class="p-button-danger" [disabled]="!selectedUsers || !selectedUsers.length"></button>
    </ng-template>
  </p-toolbar>
  <br>

  <p-table [value]="users?.items || []"
           [paginator]="true"
           [rows]="5"
           [rowsPerPageOptions]="[5,10,20]"
           [lazy]="true"
           [loading]="loading"
           [lazyLoadOnInit]="false"
           (onLazyLoad)="nextPage($event)"
           [totalRecords]="users?.totalCount || 0"
           [showCurrentPageReport]=true
           [globalFilterFields]="['firstName','lastName','email']"
           [(selection)]="selectedUsers"
           [rowHover]="true"
           dataKey="id">

    <ng-template pTemplate="caption">
      <div class="flex justify-content-between">
        <h5>Manage Users</h5>
        <div>
      <span class="p-input-icon-left">
        <i class="pi pi-search"></i>
        <input pInputText type="text"  placeholder="Search..." />
      </span>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="header">
      <tr>
        <th style="width: 3rem">
          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
        <th pSortableColumn="firstName">First Name<p-sortIcon field="firstName"></p-sortIcon></th>
        <th pSortableColumn="lastName">Last Name<p-sortIcon field="lastName"></p-sortIcon></th>
        <th pSortableColumn="email">Email<p-sortIcon field="email"></p-sortIcon></th>
        <th></th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-user>
      <tr>
        <td>
          <p-tableCheckbox [value]="user"></p-tableCheckbox>
        </td>
        <td>{{user?.firstName}}</td>
        <td>{{user?.lastName}}</td>
        <td>{{user?.email}}</td>
        <td class="flex justify-content-center flex-wrap gap-1">
          <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success p-mr-2" (click) = edit(user)></button>
          <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="deleteSingle(user.id)"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>

</p-card>
